@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
  --surface: #f7f7f8;
  --surface-2: #ffffff;
  --border: #e5e7eb;
  --muted: #374151;
  --muted-contrast: #111827;
  --overlay: rgba(255, 255, 255, 0.7);
  --primary: #4A90E2;
  --danger: #D0021B;
  --text-primary: #2F2F2F;
  --text-secondary: #8E8E93;
}

/* Manual theme via data-theme */
[data-theme='light'] {
  --background: #ffffff;
  --foreground: #171717;
  --surface: #f7f7f8;
  --surface-2: #ffffff;
  --border: #e5e7eb;
  --muted: #374151;
  --muted-contrast: #111827;
  --overlay: rgba(255, 255, 255, 0.7);
  --primary: #4A90E2;
  --danger: #D0021B;
  --text-primary: #2F2F2F;
  --text-secondary: #8E8E93;
  --secondary-bg: #2F2F2F;
}
[data-theme='dark'] {
  --background: #0a0a0a;
  --foreground: #ededed;
  --surface: #0f0f10;
  --surface-2: #111214;
  --border: #2a2a2a;
  --muted: #a3a3a3;
  --muted-contrast: #e5e5e5;
  --overlay: rgba(0, 0, 0, 0.7);
  --primary: #4A90E2;
  --danger: #D0021B;
  --text-primary: #ededed;
  --text-secondary: #a3a3a3;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* System fallback when theme is 'system' (initial render before hydration) */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --background: #0a0a0a;
    --foreground: #ededed;
    --surface: #0f0f10;
    --surface-2: #111214;
    --border: #2a2a2a;
    --muted: #a3a3a3;
    --muted-contrast: #e5e5e5;
    --overlay: rgba(0, 0, 0, 0.7);
  --primary: #4A90E2;
  --danger: #D0021B;
  --text-primary: #ededed;
  --text-secondary: #a3a3a3;
  --secondary-bg: #2a2a2a;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* Theme-aware utilities */
.bg-app { background: var(--background); }
.text-app { color: var(--foreground); }
.surface { background: var(--surface); }
.card { background: var(--surface-2); border: 1px solid var(--border); border-radius: 1rem; }
.toolbar-card { background: var(--surface-2); border: 1px solid var(--border); }
.bar { background-color: var(--overlay); }
.border-app { border-color: var(--border); }
.muted { color: var(--muted); }

/* Theme-aware buttons */
.btn-secondary { background: var(--secondary-bg); color: #ffffff; }
.btn-secondary:hover { filter: brightness(1.1); }
.btn-quiet {
  border-color: var(--border);
}
.btn-quiet:hover { background: var(--surface); }

/* Utility classes */
.btn { @apply inline-flex items-center justify-center rounded-lg text-white px-4 py-2 text-sm font-medium disabled:opacity-60 disabled:cursor-not-allowed; background: var(--primary); }
.btn { transition: background-color 120ms ease, color 120ms ease, transform 120ms ease, filter 120ms ease, box-shadow 120ms ease; }
.btn:hover { filter: brightness(1.05); }
.btn:active { transform: scale(0.98); }
.btn-secondary { background: var(--secondary-bg); color: #fff; }
.btn-secondary:hover { filter: brightness(1.1); }
.btn-danger { background: var(--danger); color: #fff; }
.btn-quiet {
  @apply inline-flex items-center justify-center rounded-lg px-3 py-2 text-sm bg-transparent border;
}
.btn-quiet { transition: background-color 120ms ease, color 120ms ease, transform 120ms ease, filter 120ms ease, box-shadow 120ms ease; }
.btn-quiet:active { transform: scale(0.98); }

/* Gemini-inspired secondary button */
.btn-gemini {
  @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium;
  background: #89B4F8; /* Gemini light blue */
  color: #0A1F44; /* deep navy for contrast */
  transition: background-color 120ms ease, color 120ms ease, transform 120ms ease, filter 120ms ease, box-shadow 120ms ease;
}
.btn-gemini:hover { filter: brightness(1.03); }
.btn-gemini:active { transform: scale(0.98); }

/* Gemini outline button */
.btn-gemini-outline {
  @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-semibold;
  background: transparent;
  color: #89B4F8;
  border: 2px solid #89B4F8;
  transition: background-color 120ms ease, color 120ms ease, transform 120ms ease, filter 120ms ease, box-shadow 120ms ease;
}
.btn-gemini-outline:hover { background: rgba(137, 180, 248, 0.08); }
.btn-gemini-outline:active { transform: scale(0.98); }

/* Savings pill */
.badge-saving {
  background: #16a34a; /* green-600 */
  color: #fff;
  @apply inline-flex items-center rounded-full px-3 py-1 text-xs font-bold;
}

.btn-lg {
  @apply px-4 py-3 text-base rounded-xl;
}

/* Mobile spacing tweaks */
@media (max-width: 640px) {
  .card { border-radius: 20px; }
}

/* Hide scrollbars for horizontal toolbars */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* Improve mobile form usability: prevent Safari zoom by ensuring 16px text size */
input, select, textarea {
  font-size: 16px;
}

/* Touch target utility */
.tap {
  min-height: 44px;
  min-width: 44px;
}

/* Line clamp utility (2 lines) for cross-browser without Tailwind plugin */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Premium background with subtle gradients and ambient lighting */
.app-bg {
  background: radial-gradient(1200px 600px at -10% -10%, rgba(173, 84, 255, 0.08), transparent 60%),
              radial-gradient(900px 500px at 110% 10%, rgba(255, 84, 164, 0.06), transparent 60%),
              linear-gradient(180deg, #0a0a0a 0%, #1c1c1c 50%, #0f0f0f 100%);
  position: relative;
}
.app-bg::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background:
    radial-gradient(800px 400px at 10% 90%, rgba(137, 180, 248, 0.06), transparent 60%);
}

/* Glassmorphism card */
.glass-card {
  position: relative;
  border-radius: 16px;
  background: rgba(20, 20, 20, 0.75);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}
.glass-card::after {
  /* Soft top inset highlight */
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, rgba(255,255,255,0.12), rgba(255,255,255,0.02) 30%, rgba(255,255,255,0.12));
  border-top-left-radius: 16px; border-top-right-radius: 16px;
  pointer-events: none;
}

/* Buttons: premium tactile feedback */
.btn, .btn-secondary, .btn-danger, .btn-quiet, .btn-gemini, .btn-gemini-outline {
  transition: transform 140ms cubic-bezier(0.4, 0, 0.2, 1), filter 140ms cubic-bezier(0.4, 0, 0.2, 1), box-shadow 140ms cubic-bezier(0.4, 0, 0.2, 1);
}
.btn:active, .btn-secondary:active, .btn-danger:active, .btn-quiet:active, .btn-gemini:active, .btn-gemini-outline:active { transform: scale(0.96); }

/* Cancel gradient button */
.btn-cancel-gradient {
  @apply inline-flex items-center justify-center rounded-xl px-5 py-3 text-base font-semibold text-white;
  background: linear-gradient(180deg, #e0102b 0%, #c4071f 100%);
  box-shadow: 0 6px 20px rgba(224, 16, 43, 0.45);
}
.btn-cancel-gradient:hover { filter: brightness(1.03); }

/* Guide glass button */
.btn-glass-blue {
  @apply inline-flex items-center justify-center rounded-xl px-5 py-3 text-base font-semibold;
  background: rgba(30, 58, 138, 0.25);
  color: #bcd6ff;
  border: 1.5px solid rgba(137, 180, 248, 0.35);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* Savings pill gradient + glow */
.badge-saving {
  background: linear-gradient(90deg, #22c55e, #16a34a);
  box-shadow: 0 0 16px rgba(34, 197, 94, 0.25);
}

/* Avatar depth */
.avatar-depth {
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.18), 0 10px 24px rgba(0,0,0,0.45);
  border: 1px solid rgba(255,255,255,0.12);
}

/* Stronger amount styling */
.price-strong { text-shadow: 0 1px 2px rgba(0,0,0,0.5); }

/* Generic pressable utility for non-button clickable elements */
.pressable {
  transition: transform 120ms ease, filter 120ms ease, background-color 120ms ease, box-shadow 120ms ease, outline-color 120ms ease;
}
.pressable:hover { filter: brightness(1.03); }
.pressable:active { transform: scale(0.98); }

/* Accessible focus ring for all interactive elements */
button:focus-visible,
a:where(.btn,.btn-secondary,.btn-danger,.btn-quiet):focus-visible,
.pressable:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

/* Spinner */
.spinner {
  border: 2px solid rgba(255,255,255,0.2);
  border-top-color: rgba(255,255,255,0.9);
  border-radius: 9999px;
  animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Respect reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }
}

@keyframes wiggle {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(2px); }
  75% { transform: translateX(-2px); }
}
